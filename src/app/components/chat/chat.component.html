<section class="main bg-light">
    <div class="chat-window">
        <header class="">
            <button (click)="mostrarContactos()" id="btn-atras" class="animated fadeIn btn btn-light my-2 my-sm-0 celular oculto">
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="user-information clearfix">
                <div class="">
                    <span class="d-inline-block img-contact bg-success mr-2 rounded-circle">{{ usuarioActual.nombre[0]}}</span>
                </div>
                <div class="user">
                    <p class="m-0">
                        {{ usuarioActual.nombre}}
                        <span class="d-block text-success">Online</span>
                    </p>
                </div>
            </div>
            <button [routerLink]="['/login']" (click)="logout()" class="btn btn-light my-2 my-sm-0">
                <i class="fas fa-power-off text-dark"></i>
            </button>
        </header>
        <div class="row body-chat no-gutters">
            <div class="col-md-4 col" id="col-contactos">
                <div class="contactos">
                    <app-contacto *ngFor="let usuario of usuarios" [usuario]="usuario"></app-contacto>
                </div>
            </div>
            <div class="col-md-8 col col-historial oculto" id="col-historial">
                <div class="main-historial" [ngClass]="{'d-flex justify-content-center align-items-center': mostrarMensajeInicial || cargandoMensaje}">
                    <div class="cargando" 
                    [ngClass]="{'d-flex justify-content-center align-items-center': cargandoMensaje}"
                    *ngIf="cargandoMensaje">
                        <i class="fas fa-sync-alt fa-spin fs-100"></i>
                    </div>
                    <div class="mensaje-inicial" *ngIf="mostrarMensajeInicial">
                        Selecciona un chat para comenzar
                    </div>
                    <div class="mensaje" *ngIf="!mostrarMensajeInicial && !cargandoMensaje">
                        <app-mensaje *ngFor="let mensaje of mensajes" 
                        [mensaje]=mensaje
                        [idUsuarioActual]="idUsuarioActual"></app-mensaje>
                    </div>
                    <form (ngSubmit)="enviarMensaje(f)" #f="ngForm" *ngIf="!mostrarMensajeInicial && !cargandoMensaje">
                        <div class="form-group">
                            <input [(ngModel)]="mensajePorEnviar"
                            type="text"
                            minlength="1"
                            class="form-control" name="mensaje" id="" aria-describedby="helpId" placeholder="Escribe">
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>